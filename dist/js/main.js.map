{"version":3,"sources":["main.js"],"names":["$","document","ready","active","removeClass","parent","addClass","getUserList","submit","e","preventDefault","formData","FormData","createUser","reader","FileReader","onload","attr","target","result","change","input","files","readAsDataURL","hideSwitch","room_id","updateRoomForm","append","updateRoom","createRoom","getRoomList","fn","getFormData","data","dataArray","serializeArray","i","length","name","value","jQuery","apiRequest","method","action","params","callback","isFormData","constructor","auth","user_id","session_id","ajax","type","url","processData","contentType","success","response","JSON","parse","console","log","message","error","newAlert","alert","isError","check","find","text","fadeIn","unbind","click","fadeOut","userList","empty","each","body","obj","id","tr","username","role","timestamp","td","button","createButton","children","deleteUser","target_id","changeRoomStatus","status","deleteRoom","changeRoom","location","href","form","val","number","level","department","description","image","thumb","code","cleanedList","uncleanedList","priv","icon","show","hide","bool"],"mappings":"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","file":"main.js","sourcesContent":["/*\n  Created by: Christopher Gauffin\n  Description: Core functionality for hotel admin, contains functions for API requests and list generation of users and rooms\n*/\n\n$(document).ready(function(){\n    if(active) {\n      $(\"#menu li.active\").removeClass(\"active\");\n      $(\"#menu a[href='?\"+active+\"']\").parent(\"li\").addClass(\"active\");\n    }\n\n    switch(active) {\n      case \"users\":\n        getUserList();\n        \n        $(\"#user_form\").submit(function(e) {\n          e.preventDefault();\n\n          var formData = new FormData(this);\n          createUser(formData);\n        });\n      break;\n\n      case \"editroom\":\n        var reader = new FileReader();\n        reader.onload = function (e) {\n          $('#room_img img').attr('src', e.target.result);\n        };\n\n        $(\"#room_img_input\").change(function() {\n          var input = $(this)[0];\n          \n          if (input.files && input.files[0]) {\n            reader.readAsDataURL(input.files[0]);\n          }\n\n          hideSwitch($(\"#room_img img\"), $(\"#room_img i\"), input.files[0]);\n        });\n\n        if(room_id) {\n          updateRoomForm(room_id);\n        }\n\n        $(\"#room_form\").submit(function(e) {\n          e.preventDefault();\n\n          var formData = new FormData(this);\n          \n          if(room_id) {\n            formData.append(\"room_id\", room_id);\n            updateRoom(room_id, formData);\n          } else {\n            createRoom(formData);\n          }\n        });\n\n      break;\n\n      case \"rooms\":\n        getRoomList();\n      break;\n    }\n});\n\n(function($){\n  $.fn.getFormData = function(){\n    var data = {};\n    var dataArray = $(this).serializeArray();\n    for(var i=0;i<dataArray.length;i++){\n      data[dataArray[i].name] = dataArray[i].value;\n    }\n    return data;\n  }\n})(jQuery);\n\n\nfunction apiRequest(method, action, params, callback = null){\n\n  var isFormData = params.constructor.name === \"FormData\";\n\n  if(isFormData){\n    params.append(\"action\", action);\n  } else {\n    params.action = action;\n  }\n\n  if(typeof auth.user_id !== \"undefined\" && typeof auth.session_id !== \"undefined\"){\n    if(isFormData){\n      params.append(\"user_id\", auth.user_id);\n      params.append(\"session_id\", auth.session_id);\n    } else {\n      params.user_id = auth.user_id;\n      params.session_id = auth.session_id;\n    }\n  }\n\n  $.ajax({\n    type: method,\n    data: params,\n    url: \"api.php\",\n    processData: !isFormData,\n    contentType: isFormData ? false : \"application/x-www-form-urlencoded\",\n    success: function(response) {\n      try {\n        if( callback != null ) callback(JSON.parse(response));\n      } catch(e) {\n        console.log(e.message);\n        console.log(response);\n      }\n    },\n    error: function(response){\n      console.log(response);\n    }\n  });\n}\n\nfunction newAlert(alert, isError, message) {\n  alert.addClass(isError ? \"alert-danger\" : \"alert-success\");\n  alert.removeClass(isError ? \"alert-success\" : \"alert-danger\");\n  var check = alert.find(\".check\");\n  var error = alert.find(\".error\");\n\n  hideSwitch(error, check, isError);\n  \n  alert.find(\".message\").text(message);\n  alert.fadeIn(300);\n\n  alert.unbind(\"click\").click(function() {\n    alert.fadeOut(300);\n  })\n}\n  \n  \nfunction getUserList(){\n\n  var userList = $(\"#user_table table tbody\");\n  userList.empty();\n\n  apiRequest(\"GET\", \"getUsers\", {}, function(response){\n      $.each(response.body, function(i, obj){\n          if(obj.id == auth.user_id) return;\n\n          var tr = $(\"<tr data-id='\"+obj.id+\"'></tr>\");\n  \n          tr.append(\"<td>\"+obj.name+\"</td>\");\n          tr.append(\"<td>\"+obj.username+\"</td>\");\n\n          var role = \"Städpersonal\";\n          if(obj.role == 1) role = \"Administratör\";\n\n          tr.append(\"<td>\"+role+\"</td>\");\n          tr.append(\"<td>\"+obj.timestamp+\"</td>\");\n\n          var td = $(\"<td></td>\");\n          var button = createButton(\"delete-user\", \"trash\", obj.id);\n          td.append(button);\n          tr.append(td);\n          \n          userList.append(tr);\n      });\n\n      hideSwitch($(\"#user_table table\"), $(\"#user_table .no-list-text\"), userList.children().length > 0);\n  });\n\n  \n}\n\n\nfunction deleteUser(user_id) {\n  console.log(user_id);\n  apiRequest(\"POST\", \"deleteUser\", {target_id: user_id}, function(response) {\n    console.log(response);\n    if(response.success) {\n      newAlert($(\"#alert\"), true, response.message);\n      getUserList();\n    } else {\n      newAlert($(\"#alert\"), true, response.message);\n    }\n  });\n}\n\nfunction createUser(formData) {\n  apiRequest(\"POST\", \"createUser\", formData, function(response) {\n    if(response.success) {\n      newAlert($(\"#alert\"), false, response.message);\n      getUserList();\n    } else {\n      newAlert($(\"#alert\"), true, response.message);\n    }\n  });\n}\n\n\nfunction createRoom(formData) {\n  apiRequest(\"POST\", \"createRoom\", formData, function(response) {\n    console.log(response);\n    if(response.success) {\n      newAlert($(\"#alert\"), false, response.message);\n    } else {\n      newAlert($(\"#alert\"), true, response.message);\n    }\n  });\n}\n\nfunction updateRoom(id, formData) {\n  apiRequest(\"POST\", \"updateRoom\", formData, function(response) {\n    console.log(response);\n    if(response.success) {\n      newAlert($(\"#alert\"), false, response.message);\n    } else {\n      newAlert($(\"#alert\"), true, response.message);\n    }\n  });\n}\n\nfunction changeRoomStatus(id, status) {\n  apiRequest(\"POST\", \"changeRoomStatus\", {room_id: id, status: status}, function(response) {\n    console.log(response);\n    if(response.success) {\n      getRoomList();\n\n      newAlert($(\"#alert\"), status != 1, response.message);\n      \n    } else {\n      newAlert($(\"#alert\"), true, response.message);\n    }\n  });\n}\n\nfunction deleteRoom(id) {\n  apiRequest(\"POST\", \"deleteRoom\", {room_id: id}, function(response) {\n    if(response.success) {\n      getRoomList();\n      newAlert($(\"#alert\"), true, response.message);\n      \n    } else {\n      newAlert($(\"#alert\"), true, response.message);\n    }\n  });\n}\n\nfunction changeRoom(id) {\n  location.href = \"?editroom&room_id=\"+id;\n}\n\nfunction updateRoomForm(id) {\n  apiRequest(\"GET\", \"getSingleRoom\", {room_id: id}, function(response) {\n    console.log(response);\n    var form = $(\"#room_form\");\n    var obj = response.body;\n    form.find(\"[name=number]\").val(obj.number);\n    form.find(\"[name=level]\").val(obj.level);\n    form.find(\"[name=department]\").val(obj.department);\n    form.find(\"[name=status]\").val(obj.status);\n    form.find(\"[name=description]\").text(obj.description);\n    form.find(\"img\").attr(\"src\", obj.image.thumb);\n    form.find(\"[type=submit]\").text(\"Uppdatera hotellrum\");\n    $(\".title\").text(\"Uppdatera rum: \"+obj.code);\n    hideSwitch($(\"#room_img img\"), $(\"#room_img i\"), true);\n  });\n}\n\nfunction getRoomList() {\n  apiRequest(\"GET\", \"getRooms\", {}, function(response) {\n    var cleanedList = $(\"#cleaned_rooms table tbody\");\n    var uncleanedList = $(\"#uncleaned_rooms table tbody\");\n    cleanedList.empty();\n    uncleanedList.empty();\n\n    $.each(response.body, function(i, obj){\n      var id = obj.id;\n      \n      var tr = $(\"<tr data-id='\"+id+\"'></tr>\");\n\n      tr.append(\"<td><img src='\"+obj.image.thumb+\"'</td>\")\n      tr.append(\"<td>\"+obj.code+\"</td>\");\n      tr.append(\"<td>\"+obj.description+\"</td>\");\n\n      var td = $(\"<td></td>\");\n\n      \n      if(obj.status == 1) {\n        td.append(createButton(\"unclean-room\", \"remove\", id));\n      } else {\n        td.append(createButton(\"clean-room\", \"check\", id));\n      }\n\n      if(priv) {\n        td.append(createButton(\"change-room\", \"edit\", id));\n        td.append(createButton(\"delete-room\", \"trash\", id));\n      }\n      \n      tr.append(td);\n      \n      if(obj.status == 1) {\n        cleanedList.append(tr);\n      } else {\n        uncleanedList.append(tr);\n      }\n    });\n\n    hideSwitch($(\"#cleaned_rooms .room-table\"), $(\"#cleaned_rooms .no-list-text\"), cleanedList.children().length != 0);\n    hideSwitch($(\"#uncleaned_rooms .room-table\"), $(\"#uncleaned_rooms .no-list-text\"), uncleanedList.children().length != 0);\n\n  });\n}\n\nfunction createButton(action, icon, id) {\n  var button = $(\"<button class='btn btn-primary \"+action+\" edit-btn'><i class='fa fa-\"+icon+\"'></i></button>\");\n  button.click(function() {\n    switch(action){\n      case \"delete-room\":\n        deleteRoom(id);\n      break;\n      case \"change-room\":\n        changeRoom(id);\n      break;\n      case \"clean-room\":\n        changeRoomStatus(id, 1);\n      break;\n      case \"unclean-room\":\n        changeRoomStatus(id, 0);\n      break;\n      case \"delete-user\":\n        deleteUser(id);\n      break;\n    }\n  });\n\n  return button;\n}\n\nfunction hideSwitch(show, hide, bool) {\n  if(bool) {\n    console.log(\"asdf\");\n    show.show();\n    hide.hide();\n  } else {\n    hide.show();\n    show.hide();\n  }\n}"]}