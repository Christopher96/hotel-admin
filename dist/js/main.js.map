{"version":3,"sources":["main.js"],"names":["$","document","ready","active","removeClass","parent","addClass","apiRequest","method","action","params","callback","isFormData","constructor","name","append","auth","user_id","session_id","ajax","type","data","url","processData","contentType","success","response","JSON","parse","e","console","log","message","error","getUserList","each","body","i","obj","tr","id","username","role","timestamp"],"mappings":"AAAA;;;;;AAKAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAU;AACxB,MAAGC,MAAH,EAAW;AACTH,MAAE,iBAAF,EAAqBI,WAArB,CAAiC,QAAjC;AACAJ,MAAE,oBAAkBG,MAAlB,GAAyB,IAA3B,EAAiCE,MAAjC,CAAwC,IAAxC,EAA8CC,QAA9C,CAAuD,QAAvD;AACD;AACF,CALH;;AAOA,SAASC,UAAT,CAAoBC,MAApB,EAA4BC,MAA5B,EAAoCC,MAApC,EAA4CC,WAAW,IAAvD,EAA4D;;AAExD,MAAIC,aAAaF,OAAOG,WAAP,CAAmBC,IAAnB,KAA4B,UAA7C;;AAEA,MAAGF,UAAH,EAAc;AACZF,WAAOK,MAAP,CAAc,QAAd,EAAwBN,MAAxB;AACD,GAFD,MAEO;AACLC,WAAOD,MAAP,GAAgBA,MAAhB;AACD;;AAED,MAAG,OAAOO,KAAKC,OAAZ,KAAwB,WAAxB,IAAuC,OAAOD,KAAKC,OAAZ,KAAwB,WAAlE,EAA8E;AAC5E,QAAGL,UAAH,EAAc;AACZF,aAAOK,MAAP,CAAc,SAAd,EAAyBC,KAAKC,OAA9B;AACAP,aAAOK,MAAP,CAAc,YAAd,EAA4BC,KAAKE,UAAjC;AAED,KAJD,MAIO;AACLR,aAAOO,OAAP,GAAiBD,KAAKC,OAAtB;AACAP,aAAOQ,UAAP,GAAoBF,KAAKE,UAAzB;AACD;AACF;;AAEDlB,IAAEmB,IAAF,CAAO;AACLC,UAAMZ,MADD;AAELa,UAAMX,MAFD;AAGLY,SAAK,aAHA;AAILC,iBAAa,CAACX,UAJT;AAKLY,iBAAaZ,aAAa,KAAb,GAAqB,mCAL7B;AAMLa,aAAS,UAASC,QAAT,EAAmB;AAC1B,UAAI;AACF,YAAIf,YAAY,IAAhB,EAAuBA,SAASgB,KAAKC,KAAL,CAAWF,QAAX,CAAT;AACxB,OAFD,CAEE,OAAMG,CAAN,EAAS;AACTC,gBAAQC,GAAR,CAAYF,EAAEG,OAAd;AACAF,gBAAQC,GAAR,CAAYL,QAAZ;AACD;AACF,KAbI;AAcLO,WAAO,UAASP,QAAT,EAAkB;AACvBI,cAAQC,GAAR,CAAYL,QAAZ;AACD;AAhBI,GAAP;AAkBD;;AAGH,SAASQ,WAAT,GAAsB;AAClB3B,aAAW,KAAX,EAAkB,UAAlB,EAA8B,EAA9B,EAAkC,UAASmB,QAAT,EAAkB;AAChD1B,MAAEmC,IAAF,CAAOT,SAASU,IAAhB,EAAsB,UAASC,CAAT,EAAYC,GAAZ,EAAgB;AAClC,UAAIC,KAAKvC,EAAE,kBAAgBsC,IAAIE,EAApB,GAAuB,IAAzB,CAAT;;AAEAD,SAAGxB,MAAH,CAAU,SAAOuB,IAAIxB,IAAX,GAAgB,OAA1B;AACAyB,SAAGxB,MAAH,CAAU,SAAOuB,IAAIG,QAAX,GAAoB,OAA9B;;AAEA,UAAIC,OAAO,cAAX;AACA,UAAGJ,IAAII,IAAJ,IAAY,CAAf,EAAkBA,OAAO,eAAP;;AAElBH,SAAGxB,MAAH,CAAU,SAAO2B,IAAP,GAAY,OAAtB;AACAH,SAAGxB,MAAH,CAAU,SAAOuB,IAAIK,SAAX,GAAqB,OAA/B;;AAEAJ,SAAGxB,MAAH,CAAU,+EAAV;;AAEAf,QAAE,mBAAF,EAAuBe,MAAvB,CAA8BwB,EAA9B;AACH,KAfD;AAgBH,GAjBD;AAkBD","file":"main.js","sourcesContent":["/*\n  Created by: Christopher Gauffin\n  Description: Core functionality for blog, contains function for API requests and post generation\n*/\n\n$(document).ready(function(){\n    if(active) {\n      $(\"#menu li.active\").removeClass(\"active\");\n      $(\"#menu a[href='?\"+active+\"']\").parent(\"li\").addClass(\"active\");\n    }\n  });\n  \nfunction apiRequest(method, action, params, callback = null){\n  \n    var isFormData = params.constructor.name === \"FormData\";\n  \n    if(isFormData){\n      params.append(\"action\", action);\n    } else {\n      params.action = action;\n    }\n  \n    if(typeof auth.user_id !== \"undefined\" && typeof auth.user_id !== \"undefined\"){\n      if(isFormData){\n        params.append(\"user_id\", auth.user_id);\n        params.append(\"session_id\", auth.session_id);\n  \n      } else {\n        params.user_id = auth.user_id;\n        params.session_id = auth.session_id;\n      }\n    }\n  \n    $.ajax({\n      type: method,\n      data: params,\n      url: \"php/api.php\",\n      processData: !isFormData,\n      contentType: isFormData ? false : \"application/x-www-form-urlencoded\",\n      success: function(response) {\n        try {\n          if( callback != null ) callback(JSON.parse(response));\n        } catch(e) {\n          console.log(e.message);\n          console.log(response);\n        }\n      },\n      error: function(response){\n        console.log(response);\n      }\n    });\n  }\n  \n  \nfunction getUserList(){\n    apiRequest(\"GET\", \"getUsers\", {}, function(response){\n        $.each(response.body, function(i, obj){\n            var tr = $(\"<tr data-id='\"+obj.id+\"'>\");\n    \n            tr.append(\"<td>\"+obj.name+\"</td>\");\n            tr.append(\"<td>\"+obj.username+\"</td>\");\n\n            var role = \"Städpersonal\";\n            if(obj.role == 1) role = \"Administratör\";\n\n            tr.append(\"<td>\"+role+\"</td>\");\n            tr.append(\"<td>\"+obj.timestamp+\"</td>\");\n          \n            tr.append(\"<td><button class='btn btn-primary'><i class='fa fa-trash'></i></button></td>\");\n\n            $(\"#user_table tbody\").append(tr);\n        });\n    });\n  }"]}